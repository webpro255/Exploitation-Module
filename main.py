import os
from scripts.fetch_exploit import fetch_exploit
from scripts.logging import log_exploit_attempt
from scripts.scan_services import scan_services

def main():
    print("Welcome to Exploitation-Module!")
    print("1. Scan for services")
    print("2. Fetch exploits for a service")
    print("3. Launch an exploit and log the attempt")
    print("4. Exit")

    choice = input("Choose an option (1-4): ")

    if choice == "1":
        # Scan services
        target_ip = input("Enter the target IP address to scan: ")
        services = scan_services(target_ip)
        print("Detected services:")
        for service in services:
            print(f"- {service['name']} {service['version']}")
    elif choice == "2":
        # Fetch exploits
        service_name = input("Enter the service name to search exploits for: ")
        fetch_exploit(service_name)
    elif choice == "3":
        # Launch an exploit and log it (placeholder for launching actual exploit)
        service_name = input("Enter the service name: ")
        exploit_name = input("Enter the exploit name: ")
        result = input("Enter the result (success/failure): ")

        # Log the exploit attempt
        log_exploit_attempt(service_name, exploit_name, result)
        print("Exploit attempt logged!")
    elif choice == "4":
        print("Exiting...")
        exit()
    else:
        print("Invalid option. Please choose a valid option.")

if __name__ == "__main__":
    main()
